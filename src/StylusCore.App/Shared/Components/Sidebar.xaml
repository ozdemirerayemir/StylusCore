<UserControl x:Class="StylusCore.App.Shared.Components.Sidebar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="Root"
             Width="48"
             SnapsToDevicePixels="True"
             UseLayoutRounding="True">

    <UserControl.Resources>
        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bg" Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bg" Property="Background" Value="#15000000"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <!-- Ana Container: Border ile sağ çizgi -->
    <Border Background="{DynamicResource SidebarBackgroundBrush}"
            BorderBrush="{DynamicResource PrimaryBorderBrush}"
            BorderThickness="0,0,1,0">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="48"/>  <!-- Toggle -->
                <RowDefinition Height="*"/>   <!-- Nav Items -->
                <RowDefinition Height="48"/>  <!-- Settings -->
            </Grid.RowDefinitions>

            <!-- ROW 0: Toggle Button -->
            <Button Grid.Row="0" Style="{StaticResource SidebarButtonStyle}" Click="Toggle_Click">
                <StackPanel Orientation="Horizontal">
                    <Grid Width="48" Height="48">
                        <Path Data="{StaticResource Icon.Menu}" 
                              Style="{StaticResource IconBase}"
                              Width="20" Height="20" Stretch="Uniform"
                              HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Grid>
                </StackPanel>
            </Button>

            <!-- ROW 1: Library -->
            <StackPanel Grid.Row="1" Margin="0,8,0,0">
                <Button Style="{StaticResource SidebarButtonStyle}" Click="Library_Click" ToolTip="Library">
                    <StackPanel Orientation="Horizontal">
                        <Grid Width="48" Height="48">
                            <Path Data="{StaticResource Icon.Library}" 
                                  Style="{StaticResource IconBase}"
                                  Width="20" Height="20" Stretch="Uniform"
                                  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                        <TextBlock x:Name="LibraryText"
                                   Text="{DynamicResource Str_Library}"
                                   VerticalAlignment="Center"
                                   FontSize="{StaticResource FontSize_Body}"
                                   Foreground="{DynamicResource PrimaryTextBrush}"
                                   Visibility="Collapsed"
                                   Margin="0,0,16,0"/>
                    </StackPanel>
                </Button>
            </StackPanel>

            <!-- ROW 2: Settings -->
            <StackPanel Grid.Row="2">
                <Button Style="{StaticResource SidebarButtonStyle}" Click="Settings_Click" ToolTip="Settings">
                    <StackPanel Orientation="Horizontal">
                        <Grid Width="48" Height="48">
                            <Path Data="{StaticResource Icon.Settings}" 
                                  Style="{StaticResource IconBase}"
                                  Width="20" Height="20" Stretch="Uniform"
                                  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                        <TextBlock x:Name="SettingsText"
                                   Text="{DynamicResource Str_Settings}"
                                   VerticalAlignment="Center"
                                   FontSize="{StaticResource FontSize_Body}"
                                   Foreground="{DynamicResource PrimaryTextBrush}"
                                   Visibility="Collapsed"
                                   Margin="0,0,16,0"/>
                    </StackPanel>
                </Button>
            </StackPanel>

        </Grid>
    </Border>
</UserControl>
