<Window x:Class="StylusCore.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:StylusCore.App.Shared.Components"
        xmlns:views="clr-namespace:StylusCore.App.Features.Library.Views"
        xmlns:converters="clr-namespace:StylusCore.App.Shared.Converters"
        Title="{DynamicResource Str_AppName}"
        Width="{DynamicResource Shell.MainWindowWidth}" Height="{DynamicResource Shell.MainWindowHeight}"
        MinWidth="{DynamicResource Shell.MainWindowMinWidth}" MinHeight="{DynamicResource Shell.MainWindowMinHeight}"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource Brush.AppBg}"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResize"
        StateChanged="Window_StateChanged">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="{DynamicResource Shell.HeaderHeight}"  
                      ResizeBorderThickness="{DynamicResource Shell.ResizeBorderThickness}"
                      GlassFrameThickness="-1"
                      CornerRadius="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <!-- Main Window Border (Rounded Corners) -->
    <Border Background="{DynamicResource Brush.AppBg}"
            CornerRadius="0"
            BorderBrush="Transparent"
            BorderThickness="1">

            <Grid>
                <Grid.Style>
                    <Style TargetType="Grid">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding WindowState, RelativeSource={RelativeSource AncestorType=Window}}" Value="Maximized">
                                <Setter Property="Margin" Value="{DynamicResource Spacing8}"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Row 0: Header -->
                    <RowDefinition Height="*"/>    <!-- Row 1: Body (Sidebar + Content) -->
                </Grid.RowDefinitions>
    
                <!-- ROW 0: GLOBAL HEADER -->
                <controls:HeaderControl Grid.Row="0" Panel.ZIndex="1000"/>

                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition x:Name="SidebarColumn" Width="{DynamicResource Shell.SidebarCollapsedWidth.GL}"/> <!-- Sabit, code-behind'dan gÃ¼ncellenir -->
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
    
                    <!-- SIDEBAR -->
                    <controls:Sidebar x:Name="Sidebar" Grid.Column="0" Loaded="Sidebar_Loaded"/>
    
                    <!-- MAIN CONTENT (Rounded top-left corner) -->
                    <Border Grid.Column="1"
                            Background="{DynamicResource Brush.ContentBg}"
                            CornerRadius="{DynamicResource Library.ContentCornerRadius}"
                            BorderBrush="Transparent"
                            BorderThickness="{DynamicResource Shell.MainWindowContentBorderThickness}">
                        <Border.Effect>
                            <DropShadowEffect Color="{DynamicResource Color.Shadow}" Direction="135" ShadowDepth="2" Opacity="0.04" BlurRadius="8"/>
                        </Border.Effect>
                        <Border CornerRadius="{DynamicResource Library.ContentCornerRadius}"
                                ClipToBounds="True">
                            <Frame x:Name="MainContentFrame" NavigationUIVisibility="Hidden"/>
                        </Border>
                    </Border>
                </Grid>
            </Grid>
    </Border>

</Window>
